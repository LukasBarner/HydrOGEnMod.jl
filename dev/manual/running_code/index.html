<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Running Code · HydrOGEnMod.jl</title><meta name="title" content="Running Code · HydrOGEnMod.jl"/><meta property="og:title" content="Running Code · HydrOGEnMod.jl"/><meta property="twitter:title" content="Running Code · HydrOGEnMod.jl"/><meta name="description" content="Documentation for HydrOGEnMod.jl."/><meta property="og:description" content="Documentation for HydrOGEnMod.jl."/><meta property="twitter:description" content="Documentation for HydrOGEnMod.jl."/><meta property="og:url" content="https://LukasBarner.github.io/HydrOGEnMod.jl/manual/running_code/"/><meta property="twitter:url" content="https://LukasBarner.github.io/HydrOGEnMod.jl/manual/running_code/"/><link rel="canonical" href="https://LukasBarner.github.io/HydrOGEnMod.jl/manual/running_code/"/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../">HydrOGEnMod.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><span class="tocitem">Mathematical Formulation</span><ul><li><a class="tocitem" href="../../mathematical_formulation/structural_overview/structural_overview/">Structural Overview</a></li><li><input class="collapse-toggle" id="menuitem-2-2" type="checkbox"/><label class="tocitem" for="menuitem-2-2"><span class="docs-label">Notation</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../mathematical_formulation/notation/sets/">Sets</a></li><li><a class="tocitem" href="../../mathematical_formulation/notation/mappings/">Mappings</a></li><li><a class="tocitem" href="../../mathematical_formulation/notation/primal_variables/">Primal Variables</a></li><li><a class="tocitem" href="../../mathematical_formulation/notation/dual_variables/">Dual Variables</a></li><li><a class="tocitem" href="../../mathematical_formulation/notation/parameters/">Parameters</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-2-3" type="checkbox"/><label class="tocitem" for="menuitem-2-3"><span class="docs-label">Player Optimization Problems</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../mathematical_formulation/player_problems/producer_problem/">Producer Problem</a></li><li><a class="tocitem" href="../../mathematical_formulation/player_problems/trader_problem/">Trader Problem</a></li><li><a class="tocitem" href="../../mathematical_formulation/player_problems/converter_problem/">Converter Problem</a></li><li><a class="tocitem" href="../../mathematical_formulation/player_problems/transmission_system_operator_problem/">Transmission System Operator Problem</a></li><li><a class="tocitem" href="../../mathematical_formulation/player_problems/storage_system_operator_problem/">Storage System Operator Problem</a></li><li><a class="tocitem" href="../../mathematical_formulation/player_problems/market_clearing/">Market Clearing</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-2-4" type="checkbox"/><label class="tocitem" for="menuitem-2-4"><span class="docs-label">Complementarity Problem</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../mathematical_formulation/complementarity_problem/producer_optimality_conditions/">Producer KKTs</a></li><li><a class="tocitem" href="../../mathematical_formulation/complementarity_problem/trader_optimality_conditions/">Trader KKTs</a></li><li><a class="tocitem" href="../../mathematical_formulation/complementarity_problem/converter_optimality_conditions/">Converter KKTs</a></li><li><a class="tocitem" href="../../mathematical_formulation/complementarity_problem/transmission_system_operator_optimality_conditions/">Transmission System Operator KKTs</a></li><li><a class="tocitem" href="../../mathematical_formulation/complementarity_problem/storage_system_operator_optimality_conditions/">Storage System Operator KKTs</a></li><li><a class="tocitem" href="../../mathematical_formulation/complementarity_problem/market_clearing/">Market Clearing</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-2-5" type="checkbox"/><label class="tocitem" for="menuitem-2-5"><span class="docs-label">Convex Reformulation</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../mathematical_formulation/convex_reformulation/convex_reformulation/">Convex Optimization Problem</a></li></ul></li></ul></li><li><span class="tocitem">User Manual</span><ul><li><a class="tocitem" href="../installation_instructions/">Installation Instructions</a></li><li class="is-active"><a class="tocitem" href>Running Code</a><ul class="internal"><li><a class="tocitem" href="#Convex-Optimization-Problem"><span>Convex Optimization Problem</span></a></li><li><a class="tocitem" href="#Mixed-Complementarity-Problem"><span>Mixed Complementarity Problem</span></a></li><li><a class="tocitem" href="#Custom-Modifications"><span>Custom Modifications</span></a></li></ul></li><li><a class="tocitem" href="../data_specification/">Data Specification</a></li></ul></li><li><span class="tocitem">API Reference</span><ul><li><a class="tocitem" href="../../api/HydrOGEnMod/">HydrOGEnMod</a></li><li><a class="tocitem" href="../../api/HydrOGEnMod_Types/">HydrOGEnMod Types</a></li></ul></li><li><span class="tocitem">Test Reference</span><ul><li><a class="tocitem" href="../../tests/general_remarks/">General Remarks</a></li><li><input class="collapse-toggle" id="menuitem-5-2" type="checkbox"/><label class="tocitem" for="menuitem-5-2"><span class="docs-label">Test Cases</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../tests/test_cases/test_case_1/">Test Case 1</a></li><li><a class="tocitem" href="../../tests/test_cases/test_case_2/">Test Case 2</a></li><li><a class="tocitem" href="../../tests/test_cases/test_case_3/">Test Case 3</a></li><li><a class="tocitem" href="../../tests/test_cases/test_case_4/">Test Case 4</a></li><li><a class="tocitem" href="../../tests/test_cases/test_case_5/">Test Case 5</a></li><li><a class="tocitem" href="../../tests/test_cases/test_case_6/">Test Case 6</a></li><li><a class="tocitem" href="../../tests/test_cases/test_case_7/">Test Case 7</a></li><li><a class="tocitem" href="../../tests/test_cases/test_case_8/">Test Case 8</a></li><li><a class="tocitem" href="../../tests/test_cases/test_case_9/">Test Case 9</a></li><li><a class="tocitem" href="../../tests/test_cases/test_case_10/">Test Case 10</a></li><li><a class="tocitem" href="../../tests/test_cases/test_case_11/">Test Case 11</a></li><li><a class="tocitem" href="../../tests/test_cases/test_case_12/">Test Case 12</a></li><li><a class="tocitem" href="../../tests/test_cases/test_case_13/">Test Case 13</a></li><li><a class="tocitem" href="../../tests/test_cases/test_case_14/">Test Case 14</a></li><li><a class="tocitem" href="../../tests/test_cases/test_case_15/">Test Case 15</a></li><li><a class="tocitem" href="../../tests/test_cases/test_case_16/">Test Case 16</a></li><li><a class="tocitem" href="../../tests/test_cases/test_case_17/">Test Case 17</a></li><li><a class="tocitem" href="../../tests/test_cases/test_case_18/">Test Case 18</a></li><li><a class="tocitem" href="../../tests/test_cases/test_case_19/">Test Case 19</a></li><li><a class="tocitem" href="../../tests/test_cases/test_case_20/">Test Case 20</a></li><li><a class="tocitem" href="../../tests/test_cases/test_case_21/">Test Case 21</a></li><li><a class="tocitem" href="../../tests/test_cases/test_case_22/">Test Case 22</a></li><li><a class="tocitem" href="../../tests/test_cases/test_case_23/">Test Case 23</a></li><li><a class="tocitem" href="../../tests/test_cases/test_case_24/">Test Case 24</a></li><li><a class="tocitem" href="../../tests/test_cases/test_case_25/">Test Case 25</a></li><li><a class="tocitem" href="../../tests/test_cases/test_case_26/">Test Case 26</a></li><li><a class="tocitem" href="../../tests/test_cases/test_case_27/">Test Case 27</a></li><li><a class="tocitem" href="../../tests/test_cases/test_case_28/">Test Case 28</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-5-3" type="checkbox"/><label class="tocitem" for="menuitem-5-3"><span class="docs-label">Functional Tests</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../tests/functional_tests/functional_test_1/">Functional Test 1</a></li><li><a class="tocitem" href="../../tests/functional_tests/functional_test_2/">Functional Test 2</a></li><li><a class="tocitem" href="../../tests/functional_tests/functional_test_3/">Functional Test 3</a></li><li><a class="tocitem" href="../../tests/functional_tests/functional_test_4/">Functional Test 4</a></li><li><a class="tocitem" href="../../tests/functional_tests/functional_test_5/">Functional Test 5</a></li></ul></li></ul></li><li><a class="tocitem" href="../../replication/">Replication</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">User Manual</a></li><li class="is-active"><a href>Running Code</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Running Code</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/LukasBarner/HydrOGEnMod.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/LukasBarner/HydrOGEnMod.jl/blob/main/docs/src/manual/running_code.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Running-the-Model"><a class="docs-heading-anchor" href="#Running-the-Model">Running the Model</a><a id="Running-the-Model-1"></a><a class="docs-heading-anchor-permalink" href="#Running-the-Model" title="Permalink"></a></h1><p>The mathematical formulation builds upon two possible versions, a convex optimization problem and a mixed complementarity problem implementation. </p><p>When performance matters, it is recommended to utilize the convex optimization problem version, as it is more efficient in terms of both solution procedures, as well as model building and solution retrieval.</p><h2 id="Convex-Optimization-Problem"><a class="docs-heading-anchor" href="#Convex-Optimization-Problem">Convex Optimization Problem</a><a id="Convex-Optimization-Problem-1"></a><a class="docs-heading-anchor-permalink" href="#Convex-Optimization-Problem" title="Permalink"></a></h2><p>The code below depicts an exemplary usage of model code for the convex optimization problem formulation.  Running the model requires supplying a datafile with the corresponding <a href="../data_specification/#Data-Specification">Data Specification</a>.</p><p>Note, that in addition to this package, an additional solver is required. Any solver that works with the JuMP package and is suitable to solve convex quadratic programs may be employed. Some open source options include e.g. <a href="https://github.com/jump-dev/HiGHS.jl">HiGHS</a>, <a href="https://github.com/jump-dev/Ipopt.jl">Ipopt</a> or <a href="https://github.com/osqp/OSQP.jl">OSQP</a>, while <a href="https://github.com/jump-dev/Gurobi.jl">Gurobi</a> provides a very performant commercial but free to academics option.</p><pre><code class="language-julia hljs"># To use the HydrOGEnMod.jl package: 
using HydrOGEnMod
# In addition, a solver that is capable of solving QPs is needed:
using Ipopt
# To interact with the solved model instance, JuMP is helpful:
using JuMP

# To load the data from the datafile, use the following syntax: 
data = get_HydrOGEnMod_data(&quot;path/to/data/file&quot;);

# to store the data in a directory to be specified, use the following function:
write_csv(&quot;path/to/calculated/parameters&quot;,data)

# to build a JuMP Model with the data, use the following function: 
model = build_optimization_model(data)

# to solve the JuMP Model with a solver of your choice, run the following function:
optimize!(model, Ipopt.Optimizer)

# you can also specify different solver options like this: 
options = (&quot;TimeLimit&quot; =&gt; 100,&quot;TimeLimit&quot; =&gt; 100, &quot;FeasibilityTol&quot; =&gt; 1e-6)
optimize!(model, Ipopt.Optimizer, options)

# to write the results to a file, use the following function: 
write_csv(&quot;path/to/resultsfile&quot;, model)

# you can further interact with the solved model like this: 
prices = value.(model[:prices])

# to plot an overview of the model nodes, use this function: 
plot_model_nodes()

# both arguments nodes_path and disputed_path can be specified to point to your own files:
plot_model_nodes(nodes_path = &quot;path/to/nodes/file&quot;, disputed_path = &quot;path/to/disputed/file&quot;)

# to plot results (e.g. prices) into the map, use the following function: 
plot_model_nodes(prices[:, &quot;GH2&quot;, &quot;Block 1&quot;, &quot;OnlySeason&quot;, 2020])

# This also works with custom model node files:  
plot_model_nodes(prices[:, &quot;GH2&quot;, &quot;Block 1&quot;, &quot;OnlySeason&quot;, 2020], nodes_path = &quot;path/to/nodes/file&quot;, disputed_path = &quot;path/to/disputed/file&quot;)

# To all plot_model_nodes, a path where to save the figure can be specified: 
plot_model_nodes(prices[:, &quot;GH2&quot;, &quot;Block 1&quot;, &quot;OnlySeason&quot;, 2020], save_path = &quot;path/to/save/fig.pdf&quot;)

# for further examples, please check out the test scripts or the replication section...</code></pre><h2 id="Mixed-Complementarity-Problem"><a class="docs-heading-anchor" href="#Mixed-Complementarity-Problem">Mixed Complementarity Problem</a><a id="Mixed-Complementarity-Problem-1"></a><a class="docs-heading-anchor-permalink" href="#Mixed-Complementarity-Problem" title="Permalink"></a></h2><p>The code below depicts an exemplary usage of model code for the mixed complementarity problem formulation. </p><p>Running the model requires supplying a datafile with the corresponding <a href="../data_specification/#Data-Specification">Data Specification</a>.</p><p>The implementation in this package makes use of the PATH solver. Note, that despite being available as a dependency, the PATH solver is limited in the number of variables if no license string is provided via the environment variable <code>PATH_LICENSE_STRING</code>. The corresponding environment variable may either be set on the machine, or via <code>ENV[&quot;PATH_LICENSE_STRING&quot;] = &quot;license_string&quot;</code> from within Julia. At the time of writing, an <a href="https://pages.cs.wisc.edu/~ferris/path/LICENSE">official license string</a> is available from the developers website. </p><pre><code class="language-julia hljs"># Before using the package, a valid license string to the PATH solver needs to be specified:
ENV[&quot;PATH_LICENSE_STRING&quot;] = &quot;Copy_license_string_here&quot;

# To use the HydrOGEnMod.jl package: 
using HydrOGEnMod

# To interact with the solved model instance, JuMP and Complementarity are helpful:
using JuMP, Complementarity

# we can get the data by typing the following line:
# To get a different data file, use the keyword data = /path/to/some/datafile
data = get_HydrOGEnMod_data(&quot;path/to/data/file&quot;);

# to store the data in a directory to be specified, use the following function:
write_csv(&quot;path/to/calculated/parameters&quot;,data)

# to build a JuMP Model with the data, use the following function: 
model = build_complementarity_model(data)

# to solve the JuMP Model with a solver of your choice, run the following function:
solve_mcp(model)

# you can also specify different solver options like this: 
options = (output = &quot;no&quot;, time_limit = 5)
solve_mcp(model; options)

# to write the results to a file, use the following function: 
write_csv(&quot;path/to/resultsfile&quot;, model)

# you can further interact with the solved model like this: 
prices = result_value.(model[:π_T_to_D])

# to plot an overview of the model nodes, use this function: 
plot_model_nodes()

# both arguments nodes_path and disputed_path can be specified to point to your own files:
plot_model_nodes(nodes_path = &quot;path/to/nodes/file&quot;, disputed_path = &quot;path/to/disputed/file&quot;)

# to plot results (e.g. prices) into the map, use the following function: 
plot_model_nodes(prices[:, &quot;GH2&quot;, &quot;Block 1&quot;, &quot;OnlySeason&quot;, 2020])

# This also works with custom model node files:  
plot_model_nodes(prices[:, &quot;GH2&quot;, &quot;Block 1&quot;, &quot;OnlySeason&quot;, 2020], nodes_path = &quot;path/to/nodes/file&quot;, disputed_path = &quot;path/to/disputed/file&quot;)

# To all plot_model_nodes, a path where to save the figure can be specified: 
plot_model_nodes(prices[:, &quot;GH2&quot;, &quot;Block 1&quot;, &quot;OnlySeason&quot;, 2020], save_path = &quot;path/to/save/fig.pdf&quot;)

# for further examples, please check out the test scripts or the replication section...</code></pre><h2 id="Custom-Modifications"><a class="docs-heading-anchor" href="#Custom-Modifications">Custom Modifications</a><a id="Custom-Modifications-1"></a><a class="docs-heading-anchor-permalink" href="#Custom-Modifications" title="Permalink"></a></h2><p>While the model specification allows for quite ambitious analysis, the need to integrate special functionality may emerge. You can interact with the model supplied by <code>build_optimization_model(data)</code> and <code>build_complementarity_model(data)</code>, just like you would with any normal JuMP/Complementarity model.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../installation_instructions/">« Installation Instructions</a><a class="docs-footer-nextpage" href="../data_specification/">Data Specification »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.5.0 on <span class="colophon-date" title="Saturday 13 July 2024 11:39">Saturday 13 July 2024</span>. Using Julia version 1.10.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
